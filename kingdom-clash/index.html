<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kingdom Clash</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: #1a1a2e;
      color: #e0e0e0;
      font-family: 'Courier New', monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 10px;
    }
    .header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 6px;
      width: 900px;
    }
    .back { color: #da4; text-decoration: none; font-size: 1.2rem; }
    .back:hover { text-shadow: 0 0 10px rgba(221,170,68,0.4); }
    h1 { color: #da4; font-size: 1.6rem; text-shadow: 0 0 15px rgba(221,170,68,0.4); }
    .score-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 900px;
      margin-bottom: 4px;
      font-size: 0.85rem;
    }
    .score-bar span { color: #da4; }
    .res-bar {
      display: flex;
      gap: 16px;
      width: 900px;
      margin-bottom: 4px;
      font-size: 0.8rem;
    }
    .res-bar div { padding: 2px 6px; border-radius: 4px; background: rgba(221,170,68,0.1); }
    .res-bar .food { color: #6c6; }
    .res-bar .wood { color: #a86; }
    .res-bar .gold { color: #dd4; }
    .res-bar .pop  { color: #8bf; }
    .res-bar .age  { color: #da4; font-weight: bold; }
    canvas {
      border: 2px solid #da4;
      box-shadow: 0 0 20px rgba(221,170,68,0.2);
      display: block;
      cursor: pointer;
    }
    .game-area {
      position: relative;
      display: flex;
      gap: 6px;
    }
    .sidebar {
      width: 180px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      font-size: 0.75rem;
    }
    .panel {
      background: rgba(221,170,68,0.08);
      border: 1px solid rgba(221,170,68,0.3);
      border-radius: 4px;
      padding: 6px;
    }
    .panel h3 { color: #da4; font-size: 0.8rem; margin-bottom: 4px; }
    .btn {
      display: block;
      width: 100%;
      background: rgba(221,170,68,0.15);
      border: 1px solid rgba(221,170,68,0.4);
      color: #e0e0e0;
      font-family: 'Courier New', monospace;
      font-size: 0.7rem;
      padding: 3px 5px;
      margin: 2px 0;
      cursor: pointer;
      border-radius: 3px;
      text-align: left;
    }
    .btn:hover { background: rgba(221,170,68,0.3); }
    .btn.disabled { opacity: 0.4; cursor: not-allowed; }
    .btn .cost { color: #aaa; font-size: 0.6rem; }
    .overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 720px;
      height: 500px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #da4;
      text-align: center;
      pointer-events: none;
      background: rgba(26,26,46,0.9);
      z-index: 10;
    }
    .overlay h2 { font-size: 1.8rem; margin-bottom: 10px; text-shadow: 0 0 20px rgba(221,170,68,0.5); }
    .overlay p { font-size: 0.9rem; color: #aaa; margin: 4px; }
    .overlay .start-btn {
      margin-top: 16px;
      padding: 10px 30px;
      font-size: 1.1rem;
      background: rgba(221,170,68,0.2);
      border: 2px solid #da4;
      color: #da4;
      font-family: 'Courier New', monospace;
      cursor: pointer;
      border-radius: 6px;
      pointer-events: all;
    }
    .overlay .start-btn:hover { background: rgba(221,170,68,0.4); }
    .minimap-box {
      border: 1px solid rgba(221,170,68,0.4);
      background: #111;
      width: 168px;
      height: 112px;
    }
    .info-text { color: #aaa; font-size: 0.65rem; line-height: 1.3; }
    .hotkey { color: #da4; }
    #selInfo { min-height: 60px; }
  </style>
</head>
<body>
  <div class="header">
    <a href="../" class="back">&larr; Back</a>
    <h1>KINGDOM CLASH</h1>
  </div>
  <div class="score-bar">
    <div>Score: <span id="scoreDisplay">0</span></div>
    <div id="timer" style="color:#da4">10:00</div>
    <div>Killed: <span id="killDisplay">0</span> | Built: <span id="builtDisplay">0</span></div>
  </div>
  <div class="res-bar">
    <div class="food">Food: <span id="foodDisplay">200</span></div>
    <div class="wood">Wood: <span id="woodDisplay">200</span></div>
    <div class="gold">Gold: <span id="goldDisplay">100</span></div>
    <div class="pop">Pop: <span id="popDisplay">3/10</span></div>
    <div class="age" id="ageDisplay">Dark Age</div>
  </div>
  <div class="game-area">
    <div style="position: relative;">
      <canvas id="game" width="720" height="500"></canvas>
      <div class="overlay" id="overlay">
        <h2 id="overlayTitle">KINGDOM CLASH</h2>
        <p id="overlayText">Build your kingdom. Train your army. Crush the enemy.</p>
        <p style="font-size:0.8rem;color:#888;">Gather Food, Wood, Gold. Age up to unlock units.</p>
        <p style="font-size:0.8rem;color:#888;">Destroy the enemy Town Center to win!</p>
        <button class="start-btn" onclick="window._kcStart && window._kcStart()">START BATTLE</button>
      </div>
    </div>
    <div class="sidebar">
      <div class="panel">
        <h3>Minimap</h3>
        <canvas id="minimap" class="minimap-box" width="168" height="112"></canvas>
      </div>
      <div class="panel" id="selInfo">
        <h3>Selection</h3>
        <div class="info-text" id="selText">Click units/buildings</div>
      </div>
      <div class="panel" id="buildPanel">
        <h3>Build <span class="hotkey">[B]</span></h3>
        <div id="buildButtons"></div>
      </div>
      <div class="panel">
        <h3>Actions</h3>
        <button class="btn" id="ageUpBtn" onclick="window._kcAgeUp && window._kcAgeUp()">Age Up [A]<br><span class="cost"></span></button>
        <button class="btn" onclick="window._kcTrain && window._kcTrain('villager')">Train Villager [V]<br><span class="cost">F50</span></button>
        <div id="trainButtons"></div>
      </div>
      <div class="panel">
        <h3>Hotkeys</h3>
        <div class="info-text">
          <span class="hotkey">LClick</span> Select/Move<br>
          <span class="hotkey">RClick</span> Move/Attack<br>
          <span class="hotkey">Shift</span>+Click Multi-sel<br>
          <span class="hotkey">B</span> Build mode<br>
          <span class="hotkey">A</span> Age up<br>
          <span class="hotkey">V</span> Train Villager<br>
          <span class="hotkey">1-4</span> Train units<br>
          <span class="hotkey">Esc</span> Cancel
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    import { createGame } from './game.js';
    createGame();
  </script>
  <script src="../rating.js?v=2"></script>
</body>
</html>
