<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Civilization Micro</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: #1a1a2e;
      color: #e0e0e0;
      font-family: 'Courier New', monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 10px;
      user-select: none;
    }
    .header {
      display: flex;
      align-items: center;
      gap: 20px;
      margin-bottom: 8px;
      width: 600px;
    }
    .back { color: #ca4; text-decoration: none; font-size: 1.2rem; }
    .back:hover { text-shadow: 0 0 10px rgba(204,170,68,0.4); }
    h1 { color: #ca4; font-size: 1.6rem; text-shadow: 0 0 15px rgba(204,170,68,0.4); }
    .score-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 600px;
      margin-bottom: 6px;
      font-size: 0.85rem;
    }
    .score-bar span { color: #ca4; }
    canvas {
      border: 2px solid #ca4;
      box-shadow: 0 0 20px rgba(204,170,68,0.2);
      display: block;
      cursor: pointer;
    }
    .game-wrap { position: relative; display: inline-block; }
    .overlay {
      position: absolute;
      top: 0; left: 0;
      width: 600px; height: 500px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: #ca4;
      text-align: center;
      background: rgba(26,26,46,0.92);
      z-index: 10;
    }
    .overlay h2 { font-size: 1.8rem; margin-bottom: 10px; text-shadow: 0 0 20px rgba(204,170,68,0.5); }
    .overlay p { font-size: 0.95rem; color: #aaa; margin: 4px 0; }
    .overlay .start-btn {
      margin-top: 16px; padding: 10px 28px;
      background: #ca4; color: #1a1a2e; border: none;
      font-family: 'Courier New', monospace; font-size: 1rem;
      cursor: pointer; font-weight: bold;
    }
    .overlay .start-btn:hover { background: #db5; }
    .overlay select {
      margin: 6px 4px; padding: 4px 8px;
      background: #16213e; color: #ca4; border: 1px solid #ca4;
      font-family: 'Courier New', monospace; font-size: 0.85rem;
    }
    .panel {
      width: 600px;
      margin-top: 6px;
      display: flex;
      gap: 6px;
      font-size: 0.75rem;
    }
    .panel-box {
      background: #16213e;
      border: 1px solid #333;
      padding: 6px;
      flex: 1;
    }
    .panel-box h3 { color: #ca4; font-size: 0.8rem; margin-bottom: 4px; }
    .panel-box .info { color: #aaa; line-height: 1.4; }
    .panel-box .info b { color: #e0e0e0; }
    .action-btn {
      display: inline-block; margin: 2px; padding: 2px 6px;
      background: #ca4; color: #1a1a2e; border: none;
      font-family: 'Courier New', monospace; font-size: 0.7rem;
      cursor: pointer; font-weight: bold;
    }
    .action-btn:hover { background: #db5; }
    .action-btn:disabled { background: #555; color: #888; cursor: default; }
    #endTurnBtn {
      padding: 4px 14px; font-size: 0.85rem;
    }
    #log { color: #888; font-size: 0.7rem; max-height: 52px; overflow-y: auto; line-height: 1.3; }
  </style>
</head>
<body>
  <div class="header">
    <a href="../" class="back">&larr; Back</a>
    <h1>CIVILIZATION MICRO</h1>
  </div>
  <div class="score-bar">
    <div>Turn: <span id="turnNum">0</span>/40</div>
    <div>Score: <span id="score">0</span></div>
    <div id="turnInfo" style="color:#aaa;">--</div>
    <button class="action-btn" id="endTurnBtn" style="display:none;">END TURN</button>
  </div>
  <div class="game-wrap">
    <canvas id="game" width="600" height="500"></canvas>
    <div class="overlay" id="overlay">
      <h2 id="overlayTitle">CIVILIZATION MICRO</h2>
      <p>4X Strategy in 40 Turns</p>
      <p style="color:#ca4;font-size:0.8rem;margin-top:8px;">Explore. Expand. Exploit. Exterminate.</p>
      <div style="margin-top:12px;">
        <label style="color:#aaa;">Players: </label>
        <select id="playerCount">
          <option value="2">2 (You + 1 AI)</option>
          <option value="3">3 (You + 2 AI)</option>
          <option value="4">4 (You + 3 AI)</option>
        </select>
      </div>
      <p id="overlayText" style="font-size:0.85rem;color:#aaa;margin-top:6px;"></p>
      <button class="start-btn" id="startBtn">START GAME</button>
    </div>
  </div>
  <div class="panel" id="infoPanel" style="display:none;">
    <div class="panel-box" style="flex:1.4;">
      <h3>SELECTED</h3>
      <div class="info" id="selectedInfo">Click a unit or city</div>
    </div>
    <div class="panel-box" style="flex:1;">
      <h3>TECH TREE</h3>
      <div class="info" id="techInfo">--</div>
    </div>
    <div class="panel-box" style="flex:1.2;">
      <h3>LOG</h3>
      <div id="log"></div>
    </div>
  </div>

  <script type="module">
    import { createGame } from './game.js';
    createGame();
  </script>
  <script src="../rating.js?v=2"></script>
</body>
</html>
